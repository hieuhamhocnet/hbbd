<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPBDEMB</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23ff69b4' d='M50 91s-35-24-35-50a20 20 0 0 1 35-13 20 20 0 0 1 35 13c0 26-35 50-35 50z'/%3E%3C/svg%3E">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
         :root {
            --primary-color: #ff85a1;
            --secondary-color: #a29bfe;
            --light-color: #fff;
            --card-bg: rgba(255, 255, 255, 0.1);
            --border-color: rgba(255, 255, 255, 0.2);
        }
        
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #0c001a;
            color: var(--light-color);
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }
        
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
        }
        
        #unlock-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #6a82fb, #fc5c7d);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease-in-out;
        }
        
        .giftbox {
            position: relative;
            cursor: pointer;
            perspective: 1000px;
        }
        
        .giftbox-lid {
            width: 220px;
            height: 60px;
            background: #ff6b81;
            position: absolute;
            top: -40px;
            left: -10px;
            transform-style: preserve-3d;
            transform: rotateX(-15deg);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .giftbox-lid::before,
        .giftbox-lid::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 80px;
            background: #ff85a1;
            left: 50%;
        }
        
        .giftbox-lid::before {
            transform: translateX(-50%) skewY(20deg);
        }
        
        .giftbox-lid::after {
            transform: translateX(-50%) skewY(-20deg);
        }
        
        .giftbox-body {
            width: 200px;
            height: 150px;
            background: #ff85a1;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            font-family: 'Pacifico', cursive;
            font-size: 1.5rem;
        }
        
        #password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 10001;
            justify-content: center;
            align-items: center;
        }
        
        .password-box {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            width: 90%;
            max-width: 400px;
            color: #333;
        }
        
        #main-content {
            display: none;
            position: relative;
            z-index: 1;
        }
        
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 25px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(50px);
        }
        
        .font-pacifico {
            font-family: 'Pacifico', cursive;
        }
        
        .scene {
            width: 100%;
            height: 300px;
            position: relative;
            perspective: 1500px;
            margin-top: 40px;
            cursor: grab;
        }
        
        .scene:active {
            cursor: grabbing;
        }
        
        .carousel {
            width: 100%;
            height: 100%;
            position: absolute;
            transform-style: preserve-3d;
        }
        
        .carousel__cell {
            position: absolute;
            width: 210px;
            height: 280px;
            left: 50%;
            top: 10px;
            margin-left: -105px;
            border-radius: 12px;
            overflow: visible;
            background: rgba(255, 255, 255, 0.05);
            -webkit-box-reflect: below 15px linear-gradient(transparent, transparent, #0004);
        }
        
        .carousel__cell img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
            position: relative;
            z-index: 2;
        }
        
        .carousel__cell::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 12px;
            width: 90%;
            height: 90%;
            filter: blur(20px);
            background: var(--primary-color);
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 1;
        }
        
        .carousel__cell.is-selected::before {
            opacity: 0.7;
            animation: neon-flicker 1.5s infinite alternate;
        }
        
        @keyframes neon-flicker {
            0%,
            19%,
            21%,
            23%,
            25%,
            54%,
            56%,
            100% {
                opacity: 0.7;
            }
            20%,
            24%,
            55% {
                opacity: 0.5;
            }
        }
        
        .carousel-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
            animation: pulse-button 2.5s infinite ease-in-out;
        }
        
        @keyframes pulse-button {
            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
            }
            50% {
                transform: scale(1.08);
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
            }
        }
        
        .btn-fancy {
            background-image: linear-gradient(45deg, #e17094 100%, #ffc107 80%);
            position: relative;
            overflow: hidden;
            color: white;
            z-index: 1;
        }
        
        .btn-fancy:disabled {
            background-image: none;
            background-color: #9e9e9e;
            cursor: not-allowed;
        }
        
        .icon-heart {
            color: var(--primary-color);
            animation: pulseHeart 1.5s infinite ease-in-out;
        }
        
        @keyframes pulseHeart {
            0%,
            100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }
        
        .main-footer {
            opacity: 0;
            transform: translateY(50px);
        }
        
        #lightbox {
            background: rgba(0, 0, 0, 0.9);
            display: none;
            position: fixed;
            z-index: 20000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        #lightbox-img {
            max-width: 90%;
            max-height: 80%;
            object-fit: contain;
            border-radius: 15px;
            box-shadow: 0 0 50px rgba(255, 133, 161, 0.5);
            cursor: default;
        }
        
        .lightbox-btn {
            position: absolute;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 44px;
            height: 44px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .lightbox-btn:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }
        
        #lightbox-close {
            top: 30px;
            right: 30px;
        }
        
        #play-pause-btn {
            background: var(--primary-color);
        }
        
        .click-heart {
            color: #ff69b4;
            position: absolute;
            font-size: 1.5rem;
            pointer-events: none;
            animation: floatUpFadeOut 1s forwards;
            z-index: 9999;
        }
        
        @keyframes floatUpFadeOut {
            0% {
                transform: translateY(0) scale(0.5);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(1.5);
                opacity: 0;
            }
        }
        
        .animated-title span {
            display: inline-block;
            opacity: 0;
            transform: translateY(30px) scale(0.8);
            animation: pop-in 0.8s forwards cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        @keyframes pop-in {
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
    </style>
</head>

<body>
    <div id="loading-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0c001a; color: white; display: flex; justify-content: center; align-items: center; z-index: 10002; font-size: 1.5rem;">
        <p>ƒêang chu·∫©n b·ªã m√≥n qu√†...</p>
    </div>
    <canvas id="bg-canvas"></canvas>

    <div id="unlock-screen" style="display: none;">
        <div id="gift-box" class="giftbox">
            <div class="giftbox-body">
                <p>M·ªü Qu√†!</p><i class="fas fa-hand-pointer"></i></div>
            <div id="gift-lid" class="giftbox-lid"></div>
        </div>
    </div>

    <div id="password-modal">
        <div class="password-box">
            <h2 class="font-pacifico text-pink-500 text-4xl mb-4">M·∫≠t M√£ Y√™u Th∆∞∆°ng
            </h2>
            <i class="fas fa-lock text-pink-400"></i>
            <p class="text-gray-600 mb-4">Nh·∫≠p ng√†y k·ªâ ni·ªám c·ªßa ch√∫ng m√¨nh nha (DDMMYY)</p>
            <input type="password" id="password-input" class="w-full p-3 mb-4 border border-gray-300 rounded-lg text-center" placeholder="******">
            <button id="submit-password" class="btn-fancy w-full py-3 rounded-lg font-semibold">M·ªü kh√≥a</button>
            <p id="password-error" class="text-red-500 mt-3" style="display: none;">Sai r·ªìi b√© ∆°i, th·ª≠ l·∫°i ƒëi!</p>
        </div>
    </div>

    <div id="main-content">
        <div class="container mx-auto p-4 md:p-8 max-w-5xl">
            <header class="text-center py-12 card mb-12">
                <h1 class="animated-title font-pacifico text-5xl md:text-7xl text-pink-300 mb-10">
                </h1>
                <p class="text-3xl md:text-4xl font-semibold text-purple-300">C√¥ng Ch√∫a C·ªßa Anh &nbsp;<i class="fas fa-heart icon-heart"></i></p>
                <div class="mt-8">
                    <img src="images/love9.jpg" alt="main_image" class="mx-auto rounded-full shadow-xl w-64 h-64 object-cover border-4 border-white" onerror="this.src='https://placehold.co/400x400/333/fff?text=Loading';">
                </div>
            </header>

            <section class="card p-6 md:p-8 mb-12 text-center">
                <h2 class="text-3xl font-pacifico text-purple-300 mb-4">G·ª≠i Em, T√¨nh Y√™u B·ª± Ch√† B√° &nbsp;<i class="fas fa-heart icon-heart"></i>&nbsp;<i class="fas fa-heart icon-heart"></i>&nbsp;<i class="fas fa-heart icon-heart"></i></h2>
                <p class="text-lg text-gray-200 leading-relaxed">
                    Ch√∫c m·ª´ng sinh nh·∫≠t em b√©! V·∫≠y l√† th√™m m·ªôt tu·ªïi m·ªõi n·ªØa, H√¥m nay l√† m·ªôt ng√†y th·∫≠t ƒë·∫∑c bi·ªát, ng√†y em ƒë·∫øn v·ªõi th·∫ø gi·ªõi n√†y v√† mang theo √°nh s√°ng, ni·ªÅm vui cho cu·ªôc s·ªëng c·ªßa anh. Ch√∫c em b√© c√≥ m·ªôt ng√†y sinh nh·∫≠t th·∫≠t h·∫°nh ph√∫c, ch√∫c em s·∫Ω lu√¥n xinh ƒë·∫πp,
                    r·∫°ng r·ª° v√† ƒë·∫°t ƒë∆∞·ª£c m·ªçi ƒëi·ªÅu em mong ∆∞·ªõc. Y√™u em nhi·ªÅu! anh mong em s·∫Ω lu√¥n vui v·∫ª, h·∫°nh ph√∫c v√† r·∫°ng r·ª° nh·∫•t ƒë·∫∑c bi·ªát l√† y√™u th∆∞∆°ng anh nhi·ªÅu h∆°n n·ªØa nhaa. Y√™u em 3000 <i class="fas fa-heart icon-heart"></i> Ch√∫c
                    m·ª´ng sinh nh·∫≠t em!
                </p>
            </section>

            <section class="card p-6 md:p-8 mb-12">
                <h2 class="text-3xl font-pacifico text-center text-purple-300 mb-2">Xem ·∫£nh K·ª∑ Ni·ªám n√® <i class="fas fa-camera-retro icon-heart"></i></h2>
                <p class="text-center text-gray-300 mb-2">K√©o ƒë·ªÉ xoay ho·∫∑c d√πng n√∫t ƒë·ªÉ xem ·∫£nh nha!</p>
                <div class="scene">
                    <div id="carousel" class="carousel">
                    </div>
                </div>
                <div class="flex justify-center mt-4 space-x-4">
                    <button id="prev-btn" class="carousel-btn"><i class="fas fa-arrow-left"></i></button>
                    <button id="next-btn" class="carousel-btn"><i class="fas fa-arrow-right"></i></button>
                </div>
            </section>

            <section class="card p-6 md:p-8 mb-12 text-center">
                <h2 class="text-3xl font-pacifico text-purple-300 mb-4">V√¨ Sao Anh Y√™u Em? <i class="fas fa-question-circle icon-heart"></i></h2>
                <p id="love-reason" class="text-lg text-gray-200 mb-6 min-h-[50px]">H√£y b·∫•m n√∫t ƒë·ªÉ xem l√Ω do nha!</p>
                <button id="new-reason-btn" class="btn-fancy font-semibold py-3 px-8 rounded-full text-lg">
                    <i class="fas fa-sync-alt mr-2"></i><span>L√Ω Do l√†</span>
                 </button>
            </section>

            <section class="card p-6 md:p-8 mb-12 text-center">
                <h2 class="text-3xl font-pacifico text-purple-300 mb-4">ƒêi·ªÅu ∆Ø·ªõc Cho Em <i class="fas fa-gift icon-heart"></i></h2>
                <p class="leading-relaxed text-lg text-gray-200 mb-6 min-h-[50px]">
                    Anh mong em tu·ªïi m·ªõi s·∫Ω c√†ng th√™m xinh ƒë·∫πp, m·∫°nh kh·ªèe, lu√¥n m·ªâm c∆∞·ªùi v√† g·∫∑p th·∫≠t nhi·ªÅu may m·∫Øn. <br> D√π c√≥ kh√≥ khƒÉn n√†o ƒëi n·ªØa, h√£y nh·ªõ lu√¥n c√≥ anh ·ªü b√™n c·∫°nh em. Ch√∫ng ta s·∫Ω ƒëi c√πng nhau v√† c√≥ th√™m nhi·ªÅu k·ª∑ ni·ªám ƒë·∫πp h∆°n n·ªØa nha!
                </p>
            </section>

            <footer class="text-center py-8 mt-12 text-gray-400 main-footer">
                <p>L√†m b·∫±ng c·∫£ tr√°i tim <i class="fas fa-heart text-red-500"></i> Anh x√£ c·ªßa Em </p>
                <p>&copy; <span id="currentYear"></span> M√£i y√™u c√¥ng ch√∫a nh·ªè c·ªßa anh!</p>
            </footer>
        </div>
    </div>

    <div id="lightbox">
        <button id="lightbox-close" class="lightbox-btn">&times;</button>
        <img id="lightbox-img" src="" alt="K·ª∑ ni·ªám ph√≥ng to">
    </div>

    <audio id="bg-music" loop>
        <source src="music/1doithuongem.mp3" type="audio/mpeg">
    </audio>
    <div id="audio-player"><button class="pt-3 pb-3 pl-5 pr-5" id="play-pause-btn"><i class="fas fa-play"></i></button></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {

            const _0x4c33ba = _0x2c4c;

            function _0x2c4c(_0x2e8aae, _0x18dcc8) {
                const _0x4b2309 = _0x4b23();
                return _0x2c4c = function(_0x2c4c0d, _0x1a9d7c) {
                    _0x2c4c0d = _0x2c4c0d - 0x142;
                    let _0x27d3aa = _0x4b2309[_0x2c4c0d];
                    return _0x27d3aa;
                }, _0x2c4c(_0x2e8aae, _0x18dcc8);
            }(function(_0x1aa607, _0x5a72c8) {
                const _0x38c27b = _0x2c4c,
                    _0x32d5b9 = _0x1aa607();
                while (!![]) {
                    try {
                        const _0x4d4517 = -parseInt(_0x38c27b(0x145)) / 0x1 * (parseInt(_0x38c27b(0x14a)) / 0x2) + parseInt(_0x38c27b(0x14b)) / 0x3 + -parseInt(_0x38c27b(0x142)) / 0x4 + -parseInt(_0x38c27b(0x146)) / 0x5 * (parseInt(_0x38c27b(0x149)) / 0x6) + parseInt(_0x38c27b(0x148)) / 0x7 + -parseInt(_0x38c27b(0x143)) / 0x8 * (parseInt(_0x38c27b(0x14d)) / 0x9) + parseInt(_0x38c27b(0x147)) / 0xa;
                        if (_0x4d4517 === _0x5a72c8) break;
                        else _0x32d5b9['push'](_0x32d5b9['shift']());
                    } catch (_0x125c55) {
                        _0x32d5b9['push'](_0x32d5b9['shift']());
                    }
                }
            }(_0x4b23, 0x74079));
            const correctPassword = _0x4c33ba(0x144),
                mainTitleText = _0x4c33ba(0x14c);

            function _0x4b23() {
                const _0x32404f = ['1156122DYdUTK', 'Happy\x20Birthday!', '979839ysdKqG', '849408DSkqTC', '24sLMRwl', '270117', '37059mGfbWA', '2965945BgYFcb', '13294760VUZhYg', '4176774GKZiKE', '6xEvDcQ', '38LsumQw'];
                _0x4b23 = function() {
                    return _0x32404f;
                };
                return _0x4b23();
            }
            const galleryImages = [{
                src: "images/Love1.jpg"
            }, {
                src: "images/Love2.jpg"
            }, {
                src: "images/Love3.jpg"
            }, {
                src: "images/Love4.jpg"
            }, {
                src: "images/Love5.jpg"
            }, {
                src: "images/Love6.jpg"
            }, {
                src: "images/Love7.jpg"
            }];
            const _0x49a98f = _0x9e92;
            (function(_0x2c19d5, _0x5190ec) {
                const _0x1d4b8c = _0x9e92,
                    _0x800ded = _0x2c19d5();
                while (!![]) {
                    try {
                        const _0x4189b1 = parseInt(_0x1d4b8c(0x9b)) / 0x1 + -parseInt(_0x1d4b8c(0xa5)) / 0x2 + -parseInt(_0x1d4b8c(0xa4)) / 0x3 + -parseInt(_0x1d4b8c(0x9f)) / 0x4 + parseInt(_0x1d4b8c(0x9c)) / 0x5 * (parseInt(_0x1d4b8c(0xa7)) / 0x6) + -parseInt(_0x1d4b8c(0xa1)) / 0x7 * (parseInt(_0x1d4b8c(0xa6)) / 0x8) + parseInt(_0x1d4b8c(0x9d)) / 0x9;
                        if (_0x4189b1 === _0x5190ec) break;
                        else _0x800ded['push'](_0x800ded['shift']());
                    } catch (_0x486243) {
                        _0x800ded['push'](_0x800ded['shift']());
                    }
                }
            }(_0xe8f7, 0x63ac5));
            const loveReasons = [_0x49a98f(0xa0), 'V√¨\x20em\x20lu√¥n\x20bi·∫øt\x20c√°ch\x20l√†m\x20anh\x20c∆∞·ªùi\x20ngay\x20c·∫£\x20khi\x20bu·ªìn\x20nh·∫•t.', _0x49a98f(0x9e), _0x49a98f(0xa8), _0x49a98f(0xa2), _0x49a98f(0xa3), 'ƒê∆°n\x20gi·∫£n...\x20v√¨\x20em\x20l√†\x20em.\x20üíì'];

            function _0x9e92(_0x3df6c9, _0x4104de) {
                const _0xe8f757 = _0xe8f7();
                return _0x9e92 = function(_0x9e927, _0x8007ee) {
                    _0x9e927 = _0x9e927 - 0x9b;
                    let _0xbbdcac = _0xe8f757[_0x9e927];
                    return _0xbbdcac;
                }, _0x9e92(_0x3df6c9, _0x4104de);
            }

            function _0xe8f7() {
                const _0x12d8d9 = ['284758MChWhC', '2104BgQGLD', '1275978KIVjnw', 'V√¨\x20em\x20l√†\x20c√¥\x20g√°i\x20th√¥ng\x20minh\x20v√†\x20m·∫°nh\x20m·∫Ω\x20nh·∫•t\x20anh\x20t·ª´ng\x20bi·∫øt.', '222804zEfjeK', '5TIvMKF', '13037202YnFTDC', 'V√¨\x20·ªü\x20b√™n\x20em,\x20anh\x20th·∫•y\x20b√¨nh\x20y√™n\x20ƒë·∫øn\x20l·∫°.', '99360hpszYI', 'V√¨\x20n·ª•\x20c∆∞·ªùi\x20c·ªßa\x20em\x20t·ªèa\x20n·∫Øng\x20h∆°n\x20c·∫£\x20m·∫∑t\x20tr·ªùi.', '20377BuPBTx', 'V√¨\x20em\x20n·∫•u\x20ƒÉn\x20r·∫•t\x20ngon', 'V√¨\x20m·ªói\x20ng√†y\x20b√™n\x20em\x20ƒë·ªÅu\x20l√†\x20m·ªôt\x20cu·ªôc\x20phi√™u\x20l∆∞u\x20th√∫\x20v·ªã.', '1628916loaBih'];
                _0xe8f7 = function() {
                    return _0x12d8d9;
                };
                return _0xe8f7();
            }

            document.getElementById('loading-overlay').style.display = 'none';
            document.getElementById('unlock-screen').style.display = 'flex';
            init3DBackground();
            initUnlockSequence();
            initCarousel();
            initLoveReasons();
            initAudioPlayer();
            initMisc();

            function initUnlockSequence() {
                const giftBox = document.getElementById('gift-box');
                const modal = document.getElementById('password-modal');
                const input = document.getElementById('password-input');
                const button = document.getElementById('submit-password');

                giftBox.addEventListener('click', () => {
                    modal.style.display = 'flex';
                });

                const check = () => {
                    if (input.value === correctPassword) {
                        modal.style.display = 'none';
                        gsap.to("#gift-lid", {
                            duration: 1,
                            y: -200,
                            rotationX: -90,
                            ease: "power2.inOut"
                        });
                        gsap.to("#unlock-screen", {
                            duration: 0.8,
                            opacity: 0,
                            delay: 0.8,
                            onComplete: () => {
                                document.getElementById('unlock-screen').style.display = 'none';
                                startExperience();
                            }
                        });
                    } else {
                        document.getElementById('password-error').style.display = 'block';
                        input.value = '';
                    }
                };

                button.addEventListener('click', check);
                input.addEventListener('keypress', (e) => e.key === 'Enter' && check());
            }

            function startExperience() {
                document.getElementById('main-content').style.display = 'block';
                initScrollAnimations();

                document.getElementById('bg-music').play().catch(e => console.error("Audio play failed:", e));
                const playBtn = document.getElementById('play-pause-btn');
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                playBtn.classList.add('playing');

                const confettiColors = ['#ff85a1', '#a29bfe', '#ffc107', '#6a82fb'];
                const duration = 5 * 1000,
                    animationEnd = Date.now() + duration;
                (function frame() {
                    if (Date.now() > animationEnd) return;
                    const particleCount = 50 * ((animationEnd - Date.now()) / duration);
                    confetti({
                        particleCount,
                        startVelocity: 30,
                        spread: 360,
                        origin: {
                            x: Math.random(),
                            y: Math.random() - 0.2
                        },
                        colors: confettiColors
                    });
                    requestAnimationFrame(frame);
                }());

                const titleEl = document.querySelector('.animated-title');
                titleEl.innerHTML = mainTitleText.split('').map(char => `<span>${char===' '?'&nbsp;':char}</span>`).join('');
                document.querySelectorAll('.animated-title span').forEach((span, i) => {
                    span.style.animationDelay = `${i * 0.05}s`;
                });
            }

            function initCarousel() {
                const scene = document.querySelector('.scene');
                const carousel = document.getElementById('carousel');
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                const lightbox = document.getElementById('lightbox');
                const lightboxImg = document.getElementById('lightbox-img');
                const lightboxClose = document.getElementById('lightbox-close');

                if (!scene || !carousel) return;

                const cellCount = galleryImages.length;
                let selectedIndex = 0;
                let cells = [];
                const radius = Math.round((210 / 2) / Math.tan(Math.PI / cellCount)) * 1.4;
                const theta = 360 / cellCount;
                let rotateY = 0;

                galleryImages.forEach((img, i) => {
                    const cell = document.createElement('div');
                    cell.classList.add('carousel__cell');
                    const angle = theta * i;
                    cell.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;
                    cell.innerHTML = `<img src="${img.src}" data-index="${i}">`;
                    carousel.appendChild(cell);
                    cells.push(cell);
                });

                function updateSelection() {
                    const snappedAngle = Math.round(rotateY / theta) * theta;
                    gsap.to(carousel, {
                        rotationY: snappedAngle,
                        duration: 0.5,
                        ease: 'power2.out'
                    });

                    selectedIndex = Math.round(-snappedAngle / theta) % cellCount;
                    selectedIndex = selectedIndex < 0 ? selectedIndex + cellCount : selectedIndex;

                    cells.forEach((cell, i) => {
                        cell.classList.toggle('is-selected', i === selectedIndex);
                    });
                }

                prevBtn.addEventListener('click', () => {
                    rotateY += theta;
                    updateSelection();
                });
                nextBtn.addEventListener('click', () => {
                    rotateY -= theta;
                    updateSelection();
                });

                let startX = 0,
                    currentY = 0,
                    isDragging = false;
                const onPointerDown = (e) => {
                    isDragging = true;
                    startX = e.clientX || e.touches[0].clientX;
                    currentY = gsap.getProperty(carousel, "rotationY");
                    scene.style.cursor = 'grabbing';
                };
                const onPointerMove = (e) => {
                    if (!isDragging) return;
                    const x = e.clientX || e.touches[0].clientX;
                    const deltaX = x - startX;
                    rotateY = currentY + deltaX * 0.4;
                    gsap.set(carousel, {
                        rotationY: rotateY
                    });
                };
                const onPointerUp = () => {
                    if (!isDragging) return;
                    isDragging = false;
                    scene.style.cursor = 'grab';
                    updateSelection();
                };

                scene.addEventListener('mousedown', onPointerDown);
                scene.addEventListener('touchstart', onPointerDown);
                window.addEventListener('mousemove', onPointerMove);
                window.addEventListener('touchmove', onPointerMove);
                window.addEventListener('mouseup', onPointerUp);
                window.addEventListener('touchend', onPointerUp);

                const openLightbox = (src) => {
                    lightboxImg.src = src;
                    lightbox.style.display = 'flex';
                };
                const closeLightbox = () => {
                    lightbox.style.display = 'none';
                };

                carousel.addEventListener('click', (e) => {
                    if (!isDragging && e.target.tagName === 'IMG') {
                        openLightbox(e.target.src);
                    }
                });

                lightboxClose.addEventListener('click', closeLightbox);
                lightbox.addEventListener('click', (e) => {
                    if (e.target.id === 'lightbox') {
                        closeLightbox();
                    }
                });


                updateSelection();
            }

            function initScrollAnimations() {
                gsap.registerPlugin(ScrollTrigger);
                gsap.to('.card, .main-footer', {
                    scrollTrigger: {
                        trigger: '#main-content',
                        start: "top 80%",
                        toggleActions: "play none none reverse",
                    },
                    opacity: 1,
                    y: 0,
                    duration: 1,
                    ease: "power3.out",
                    stagger: 0.2
                });
            }

            function init3DBackground() {
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({
                    canvas: document.getElementById('bg-canvas'),
                    alpha: true
                });
                renderer.setSize(window.innerWidth, window.innerHeight);
                const particlesGeometry = new THREE.BufferGeometry;
                const count = 5000;
                const positions = new Float32Array(count * 3);
                for (let i = 0; i < count * 3; i++) {
                    positions[i] = (Math.random() - 0.5) * 10;
                }
                particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                const particlesMaterial = new THREE.PointsMaterial({
                    size: 0.02,
                    color: 0xffffff,
                    transparent: true,
                    blending: THREE.AdditiveBlending
                });
                const particleSystem = new THREE.Points(particlesGeometry, particlesMaterial);
                scene.add(particleSystem);
                camera.position.z = 5;
                const animate = function() {
                    requestAnimationFrame(animate);
                    particleSystem.rotation.y += 0.0005;
                    particleSystem.rotation.x += 0.0005;
                    renderer.render(scene, camera);
                };
                animate();
                window.addEventListener('resize', () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                });
            }

            function _0x30dd() {
                const _0x5d4e13 = ['6qzrSpY', 'textContent', 'new-reason-btn', '258160bynyAj', 'span', 'shift', '16YQdGTH', '413005uWvRsN', 'length', '260132ATmbvy', 'click', '5067NqEnpn', 'getElementById', 'love-reason', 'addEventListener', '1097850LNqcgg', '3280uoWOso', '38268IJsSRo', 'querySelector', '572DBOwUf', '2lOKmyP', '340004SLkaVG', 'C√≤n\x20n·ªØa\x20n√®!', 'disabled'];
                _0x30dd = function() {
                    return _0x5d4e13;
                };
                return _0x30dd();
            }

            function _0x460b(_0x5bd061, _0x5e7700) {
                const _0x30ddc5 = _0x30dd();
                return _0x460b = function(_0x460bfd, _0x329f12) {
                    _0x460bfd = _0x460bfd - 0x66;
                    let _0x2f059d = _0x30ddc5[_0x460bfd];
                    return _0x2f059d;
                }, _0x460b(_0x5bd061, _0x5e7700);
            }(function(_0x2fed17, _0x50cd9b) {
                const _0xc50bc5 = _0x460b,
                    _0x2e7b6e = _0x2fed17();
                while (!![]) {
                    try {
                        const _0x509099 = parseInt(_0xc50bc5(0x6b)) / 0x1 * (-parseInt(_0xc50bc5(0x7c)) / 0x2) + parseInt(_0xc50bc5(0x68)) / 0x3 * (parseInt(_0xc50bc5(0x71)) / 0x4) + parseInt(_0xc50bc5(0x6f)) / 0x5 + parseInt(_0xc50bc5(0x77)) / 0x6 + -parseInt(_0xc50bc5(0x7d)) / 0x7 * (-parseInt(_0xc50bc5(0x6e)) / 0x8) + -parseInt(_0xc50bc5(0x73)) / 0x9 * (parseInt(_0xc50bc5(0x78)) / 0xa) + -parseInt(_0xc50bc5(0x7b)) / 0xb * (-parseInt(_0xc50bc5(0x79)) / 0xc);
                        if (_0x509099 === _0x50cd9b) break;
                        else _0x2e7b6e['push'](_0x2e7b6e['shift']());
                    } catch (_0x500ec0) {
                        _0x2e7b6e['push'](_0x2e7b6e['shift']());
                    }
                }
            }(_0x30dd, 0x34aee));

            function initLoveReasons() {
                const _0x24bd66 = _0x460b,
                    _0x1ffca6 = document[_0x24bd66(0x74)](_0x24bd66(0x75)),
                    _0x393786 = document['getElementById'](_0x24bd66(0x6a)),
                    _0x3aa945 = _0x393786[_0x24bd66(0x7a)](_0x24bd66(0x6c));
                let _0x47f8e8 = [...loveReasons];
                _0x393786[_0x24bd66(0x76)](_0x24bd66(0x72), () => {
                    const _0x23b12e = _0x24bd66;
                    if (_0x47f8e8['length'] === 0x0) return;
                    const _0x3c90e1 = _0x47f8e8[_0x23b12e(0x6d)]();
                    _0x1ffca6[_0x23b12e(0x69)] = _0x3c90e1, _0x47f8e8[_0x23b12e(0x70)] > 0x0 ? _0x3aa945['textContent'] = _0x23b12e(0x66) : (_0x3aa945[_0x23b12e(0x69)] = 'H·∫øt\x20r·ªìi,\x20y√™u\x20em\x20v√¥\x20ƒëi·ªÅu\x20ki·ªán\x20lu√¥n!', _0x393786[_0x23b12e(0x67)] = !![]);
                });
            }

            function initAudioPlayer() {
                const audio = document.getElementById('bg-music');
                const playBtn = document.getElementById('play-pause-btn');
                playBtn.addEventListener('click', () => {
                    if (audio.paused) {
                        audio.play();
                        playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                        playBtn.classList.add('playing');
                    } else {
                        audio.pause();
                        playBtn.innerHTML = '<i class="fas fa-play"></i>';
                        playBtn.classList.remove('playing');
                    }
                });
            }

            function initMisc() {
                document.getElementById('currentYear').textContent = new Date().getFullYear();
                document.body.addEventListener('click', (event) => {
                    if (document.getElementById('main-content').style.display === 'block') {
                        const heart = document.createElement('i');
                        heart.classList.add('fas', 'fa-heart', 'click-heart');
                        heart.style.left = `${event.clientX - 12}px`;
                        heart.style.top = `${event.clientY - 12}px`;
                        const heartColors = ['#ff69b4', '#ff4757', '#e84393', '#ff85a1'];
                        heart.style.color = heartColors[Math.floor(Math.random() * heartColors.length)];
                        document.body.appendChild(heart);
                        setTimeout(() => heart.remove(), 1000);
                    }
                });
            }
        });
    </script>
</body>

</html>